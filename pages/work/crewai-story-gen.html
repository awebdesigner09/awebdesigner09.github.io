<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Naga Sai - Portfolio</title>
    <link href="../../static/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../fav/../favicon-16x16.png">
    <link rel="manifest" href="../../fav/site.webmanifest">
    
  </head>
  <body>
  
    <nav class="navbar navbar-expand-lg navbar-fixed-top bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Naga Sai</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor04" aria-controls="navbarColor04" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarColor04">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="../../index.html">Home    
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../pages/about.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../pages/study.html">Education</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../pages/skills.html">Skills</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle active" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">My Work<span class="visually-hidden">(current)</span></a>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="../work/hf-image-captioning.html">Image Captioning</a>
                <a class="dropdown-item" href="#">Audio Trascribe</a>
                <a class="dropdown-item" href="../work/hf-chatbot.html">Friendly chatbot</a>
                <a class="dropdown-item active" href="#">Story generator for children</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">More..</a>
              </div>
            </li>
            
          </ul>

          <ul class="navbar-nav ms-md-auto">
            <li class="nav-item">
              <a target="_blank" rel="noopener" class="nav-link" href="https://linkedin.com/in/nagasaikatakamsetty"><i class="bi bi-linkedin"></i><span class="d-lg-none ms-2">LinkedIn</span></a>
            </li>
            <li class="nav-item">
              <a target="_blank" rel="noopener" class="nav-link" href="https://github.com/awebdesigner09/"><i class="bi bi-github"></i><span class="d-lg-none ms-2">GitHub</span></a>
            </li>
            <li class="nav-item">
              <a target="_blank" rel="noopener" class="nav-link" href="../../static/NagaSai-MLEngineer-Resume.pdf"><i class="bi bi-file-earmark-text"></i><span class="d-lg-none ms-2">Resume</span></a>
            </li>
            <li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
              <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div>
              <hr class="d-lg-none my-2 text-white-50">
            </li>
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="theme-menu" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme">
                <i class="bi bi-circle-half"></i>
                <span class="d-lg-none ms-2">Toggle theme</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <button type="button" class="dropdown-item d-flex align-items-center theme-switch" data-bs-theme-value="light" aria-pressed="false">
                    <i class="bi bi-sun-fill"></i><span class="ms-2">Light</span>
                  </button>
                </li>
                <li>
                  <button type="button" class="dropdown-item d-flex align-items-center theme-switch" data-bs-theme-value="dark" aria-pressed="true">
                    <i class="bi bi-moon-stars-fill"></i><span class="ms-2">Dark</span>
                  </button>
                </li>
                <li>
                  <button type="button" class="dropdown-item d-flex align-items-center theme-switch" data-bs-theme-value="system" aria-pressed="false">
                    <i class="bi bi-display"></i><span class="ms-2">System</span>
                  </button>
                </li>
              </ul>
            </li>
          </ul>
          
        </div>
      </div>
    </nav>
    <div class="container">
<div class="jumbotron">
  <div class="container">
    <div class="text-center">
    <h1 class="text-info">Story Generator for Children</h1>      
    <p>Generates stories and images for Children. 
    <br>uses Multi-Agentic Pipeline with <u>CrewAI</u> framework and Diffusion models. </p>
    </div>
    <div class="container">
      <div class="row align-items-start">
        <div class="col">
          <div class="card">
            <div class="card-header">Parameters</div>
            <div class="card-body">
              <form id="storyForm" class="needs-validation" novalidate>
                <!-- Topic Count -->
                <div class="mb-3">
                  <label for="topicCount" class="form-label">Number of Topics:</label>
                  <select class="form-select" id="topicCount" required>
                    <option value="2">2</option>
                    <option value="4">4</option>
                  </select>
                </div>
        
                <!-- Age Group -->
                <div class="mb-4">
                  <label class="form-label">Age Group:</label>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="ageGroup" id="age1" value="6 to 8 years" checked>
                    <label class="form-check-label" for="age1">6 to 8 years</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="ageGroup" id="age2" value="8 to 10 years">
                    <label class="form-check-label" for="age2">8 to 10 years</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="ageGroup" id="age3" value="children">
                    <label class="form-check-label" for="age3">Children</label>
                  </div>
                </div>
        
                <!-- Story Theme -->
                <div class="mb-3">
                  <label for="theme" class="form-label">Story Theme:</label>
                  <select class="form-select" id="theme" required>
                    <option value="Fabel">Fabel</option>
                    <option value="Inspirational">Inspirational</option>
                    <option value="Space Adventure">Space Adventure</option>
                  </select>
                </div>
        
                <!-- Sentence Count -->
                <div class="mb-4">
                  <label class="form-label">Sentence Count:</label>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="sentenceCount" id="count1" value="20" checked>
                    <label class="form-check-label" for="count1">20</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="sentenceCount" id="count2" value="40">
                    <label class="form-check-label" for="count2">40</label>
                  </div>
                </div>
                <button type="submit" class="btn btn-primary w-100">Generate Story</button>
              </form>
            </div>
          </div>
        </div>
        <div class="col">
            <div class="card">
              <div class="card-header">Output</div>
              <div class="card-body">
                <div id="result" class="mt-4" style="display:none;"></div>
                <iframe id="pdfViewer" class="w-100" height="450px"></iframe>
                <a id="downloadLink" class="btn btn-outline-secondary mt-3 d-none">Download PDF</a>
                </div>
              </div>
            </div>
          </div>
        
        
      </div>
    </div>
    
    
    
<div id="loadingOverlay" class="position-fixed top-0 start-0 w-100 h-100 d-none" style="background: rgba(255,255,255,0.8); z-index: 1000;">
    <div class="d-flex justify-content-center align-items-center h-100">
      <div class="text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2 text-muted">Generating your story...</p>
      </div>
    </div>
  </div>
  
  <!-- Add this error alert container -->
  <div id="errorAlert" class="alert alert-danger d-none position-fixed top-0 start-50 translate-middle-x mt-3" style="z-index: 1001;"></div>
    
      
    <br>
  </div>
</div>

</div>
<footer id="footer" class="container text-center  my-2 border-top">

  <div class="row justify-content-end">
    <div class="col">
      <p>
        <a target="_blank" rel="noopener" class="nav-link" href="https://linkedin.com/in/nagasaikatakamsetty">Naga Sai Katakamsetty &nbsp; <i class="bi bi-linkedin"></i><span class="d-lg-none ms-2">LinkedIn</span></a>
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <p>Template by <a href="https://bootswatch.com">Bootswatch</a>.</p>
    </div>
    <div class="col">
      <p>Code released under the <a href="https://github.com/thomaspark/bootswatch/blob/master/LICENSE">MIT License</a>.</p>
    </div>
    <div class="col">
      <p>Web fonts from <a href="https://fonts.google.com/" rel="nofollow">Google</a>.</p>
    </div>
    
  </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
      function setTheme (mode = 'auto') {
  const userMode = localStorage.getItem('bs-theme');
  const sysMode = window.matchMedia('(prefers-color-scheme: light)').matches;
  const useSystem = mode === 'system' || (!userMode && mode === 'auto');
  const modeChosen = useSystem ? 'system' : mode === 'dark' || mode === 'light' ? mode : userMode;

  if (useSystem) {
    localStorage.removeItem('bs-theme');
  } else {
    localStorage.setItem('bs-theme', modeChosen);
  }

  document.documentElement.setAttribute('data-bs-theme', useSystem ? (sysMode ? 'light' : 'dark') : modeChosen);
  //document.querySelectorAll('.theme-switch').forEach(e => e.classList.remove('text-body'));
}

setTheme();
document.querySelectorAll('.theme-switch').forEach(e => e.addEventListener('click', () => setTheme(e.getAttribute('data-bs-theme-value'))));
window.matchMedia('(prefers-color-scheme: light)').addEventListener('change', () => setTheme());
      </script>

<script>
    document.getElementById('storyForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const form = this;
      const loadingOverlay = document.getElementById('loadingOverlay');
      const errorAlert = document.getElementById('errorAlert');
      
      // Lock controls and show loading
      loadingOverlay.classList.remove('d-none');
      errorAlert.classList.add('d-none');
      toggleFormControls(form, true);
    
      const formData = {
        topic_count: document.getElementById('topicCount').value,
        age_group: document.querySelector('input[name="ageGroup"]:checked').value,
        theme: document.getElementById('theme').value,
        sentence_count: document.querySelector('input[name="sentenceCount"]:checked').value
      };
    
      const xhr = new XMLHttpRequest();
      xhr.open('POST', 'https://webcodeagents.onrender.com/kickoffStoryFlow', true);
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.responseType = 'blob';
    
      xhr.onload = function() {
        loadingOverlay.classList.add('d-none');
        toggleFormControls(form, false);
        
        if (this.status === 200) {
          const blob = this.response;
          const url = URL.createObjectURL(blob);
          
          document.getElementById('result').style.display = 'block';
          document.getElementById('pdfViewer').src = url;
          document.getElementById('downloadLink').href = url;
          document.getElementById('downloadLink').classList.remove('d-none');
        } else {
          showError('Error generating story: ' + this.statusText);
        }
      };
    
      xhr.onerror = function() {
        loadingOverlay.classList.add('d-none');
        toggleFormControls(form, false);
        showError('Network error - please check your connection');
      };
    
      xhr.ontimeout = function() {
        loadingOverlay.classList.add('d-none');
        toggleFormControls(form, false);
        showError('Request timed out - please try again');
      };
    
      xhr.send(JSON.stringify(formData));
    });
    
    function toggleFormControls(form, disabled) {
      Array.from(form.elements).forEach(element => {
        element.disabled = disabled;
      });
    }
    
    function showError(message) {
      const errorAlert = document.getElementById('errorAlert');
      errorAlert.textContent = message;
      errorAlert.classList.remove('d-none');
      setTimeout(() => errorAlert.classList.add('d-none'), 5000);
    }
    </script>
  
    
    </body>
</html>