<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Naga Sai - Portfolio</title>
    <link href="../../static/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../fav/../favicon-16x16.png">
    <link rel="manifest" href="../../fav/site.webmanifest">
    <script type="module" crossorigin src="https://cdn.jsdelivr.net/npm/@gradio/lite/dist/lite.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gradio/lite/dist/lite.css" />
  </head>
  <body>
  
    <nav class="navbar navbar-expand-lg navbar-fixed-top bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Naga Sai</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor04" aria-controls="navbarColor04" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarColor04">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="../../index.html">Home    
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../pages/about.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../pages/study.html">Education</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../pages/skills.html">Skills</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle active" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">My Work<span class="visually-hidden">(current)</span></a>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="../work/hf-image-captioning.html">Image Captioning</a>
                <a class="dropdown-item" href="#">Audio Trascribe</a>
                <a class="dropdown-item" href="../work/hf-chatbot.html">Friendly chatbot</a>
                <a class="dropdown-item active" href="#">Story generator for children</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">More..</a>
              </div>
            </li>
            
          </ul>

          <ul class="navbar-nav ms-md-auto">
            <li class="nav-item">
              <a target="_blank" rel="noopener" class="nav-link" href="https://linkedin.com/in/nagasaikatakamsetty"><i class="bi bi-linkedin"></i><span class="d-lg-none ms-2">LinkedIn</span></a>
            </li>
            <li class="nav-item">
              <a target="_blank" rel="noopener" class="nav-link" href="https://github.com/awebdesigner09/"><i class="bi bi-github"></i><span class="d-lg-none ms-2">GitHub</span></a>
            </li>
            <li class="nav-item">
              <a target="_blank" rel="noopener" class="nav-link" href="../../static/NagaSai-MLEngineer-Resume.pdf"><i class="bi bi-file-earmark-text"></i><span class="d-lg-none ms-2">Resume</span></a>
            </li>
            <li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
              <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-white"></div>
              <hr class="d-lg-none my-2 text-white-50">
            </li>
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="theme-menu" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme">
                <i class="bi bi-circle-half"></i>
                <span class="d-lg-none ms-2">Toggle theme</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <button type="button" class="dropdown-item d-flex align-items-center theme-switch" data-bs-theme-value="light" aria-pressed="false">
                    <i class="bi bi-sun-fill"></i><span class="ms-2">Light</span>
                  </button>
                </li>
                <li>
                  <button type="button" class="dropdown-item d-flex align-items-center theme-switch" data-bs-theme-value="dark" aria-pressed="true">
                    <i class="bi bi-moon-stars-fill"></i><span class="ms-2">Dark</span>
                  </button>
                </li>
                <li>
                  <button type="button" class="dropdown-item d-flex align-items-center theme-switch" data-bs-theme-value="system" aria-pressed="false">
                    <i class="bi bi-display"></i><span class="ms-2">System</span>
                  </button>
                </li>
              </ul>
            </li>
          </ul>
          
        </div>
      </div>
    </nav>
    <div class="container">
<div class="jumbotron">
  <div class="container text-center">
    <h1 class="text-info">Story Generator for Children</h1>      
    <p>Generates text from speech or audio file. Feel free to record your own voice. 
    <br>Based on <u>distil-whisper/distil-small.en</u> model</p>
    <gradio-lite>
    <gradio-requirements>
    gradio_pdf
    </gradio-requirements>
    <gradio-file name="app.py" entrypoint>
        import gradio as gr
        import requests

        from gradio_pdf import PDF

        def generate_story(topic_count, age_group, theme, sentence_count):
            # Placeholder for actual API call
            # call_api_and_render_text,
            try:
                api_url = "https://webcodeagents.onrender.com/kickoffStoryFlow"
                # Make an API call
                response = requests.post(url=api_url,json={"topic_count": topic_count, "age_group": f"{age_group}", "theme": f"{theme}", "sentence_count": sentence_count})
                response.raise_for_status()  # Raise an error for bad status codes
                
                with open("stories.pdf", 'wb') as file:
                    for chunk in response.iter_content(chunk_size=8192):
                        file.write(chunk)
                # print(f'Response.content:{response.content} \n Response.url:{response.url}')
                return ["stories.pdf",gr.DownloadButton(label="Download PDF",value="stories.pdf", visible=True)]  # Return the response body as text
            except requests.exceptions.RequestException as e:
                return [f"RequestError: {str(e)}"]
            except Exception as ex:
                return [f"Error: {str(ex)}"]
            
        def getPDF(topic_count, age_group, theme, sentence_count):
            # Placeholder for actual API call
            # call_api_and_render_text,
            try:
                api_url = "http://127.0.0.1:8000/getPdfFile"
                # Make an API call
                response = requests.get(url=api_url)
                response.raise_for_status()  # Raise an error for bad status codes

                with open("stories.pdf", 'wb') as file:
                    for chunk in response.iter_content(chunk_size=8192):
                        file.write(chunk)
                # print(f'Response.content:{response.content} \n Response.url:{response.url}')
                return ["stories.pdf",gr.DownloadButton(label="Download PDF",value="stories.pdf", visible=True)]  # Return the response body as text
            except requests.exceptions.RequestException as e:
                return [f"RequestError: {str(e)}"]
            except Exception as ex:
                return [f"Error: {str(ex)}"]


        demo = gr.Interface(
            fn=generate_story,
            inputs=[
                gr.Dropdown(
                    label="Number of Topics", 
                    choices=[2, 4], 
                    value=2
                ),
                gr.Radio(
                    label="Age Group", 
                    choices=["6 to 8 years", "8 to 10 years", "children"], 
                    value="6 to 8 years"
                ),
                gr.Dropdown(
                    label="Story Theme", 
                    choices=["Fable", "Inspirational", "Space Adventure"], 
                    value="Fable"
                ),
                gr.Radio(
                    label="Sentence Count", 
                    choices=[20, 40], 
                    value=20
                ,)

            ],
            outputs=[PDF(label="Generated Stories",interactive=False),
                    gr.DownloadButton(label="Download PDF",value="stories.pdf", visible=False)],
            # outputs=gr.Textbox(label="Generated Story"),
            title="Story Generation for Children",
            description="Customize your story generation parameters"
        )


        demo.launch()
    </gradio-file> 
    </gradio-lite>
    <br>P.S. if you see loading.. then application might be sleeping. So, refresh and try after 10 minutes.
  </div>
</div>

</div>
<footer id="footer" class="container text-center  my-2 border-top">

  <div class="row justify-content-end">
    <div class="col">
      <p>
        <a target="_blank" rel="noopener" class="nav-link" href="https://linkedin.com/in/nagasaikatakamsetty">Naga Sai Katakamsetty &nbsp; <i class="bi bi-linkedin"></i><span class="d-lg-none ms-2">LinkedIn</span></a>
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <p>Template by <a href="https://bootswatch.com">Bootswatch</a>.</p>
    </div>
    <div class="col">
      <p>Code released under the <a href="https://github.com/thomaspark/bootswatch/blob/master/LICENSE">MIT License</a>.</p>
    </div>
    <div class="col">
      <p>Web fonts from <a href="https://fonts.google.com/" rel="nofollow">Google</a>.</p>
    </div>
    
  </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
      function setTheme (mode = 'auto') {
  const userMode = localStorage.getItem('bs-theme');
  const sysMode = window.matchMedia('(prefers-color-scheme: light)').matches;
  const useSystem = mode === 'system' || (!userMode && mode === 'auto');
  const modeChosen = useSystem ? 'system' : mode === 'dark' || mode === 'light' ? mode : userMode;

  if (useSystem) {
    localStorage.removeItem('bs-theme');
  } else {
    localStorage.setItem('bs-theme', modeChosen);
  }

  document.documentElement.setAttribute('data-bs-theme', useSystem ? (sysMode ? 'light' : 'dark') : modeChosen);
  //document.querySelectorAll('.theme-switch').forEach(e => e.classList.remove('text-body'));
}

setTheme();
document.querySelectorAll('.theme-switch').forEach(e => e.addEventListener('click', () => setTheme(e.getAttribute('data-bs-theme-value'))));
window.matchMedia('(prefers-color-scheme: light)').addEventListener('change', () => setTheme());
      </script>
    </body>
</html>